# Master’s Thesis – LLM-Assisted Portfolio Construction

This repository contains the full codebase, data outputs, and figures for my master’s thesis on combining large language model (LLM) investor views with quantitative portfolio optimization. The project experiments with multiple LLMs, converts their qualitative forecasts into structured views, and evaluates the resulting asset allocations against traditional baselines.

## Project Overview

- **Research Goal:** Leverage the Black–Litterman framework with LLM-generated views to improve equity portfolio performance.
- **Models Evaluated:** Gemma, LLaMA, and Qwen variants, each queried across multiple monthly horizons.
- **Baselines:** Equal-weighted and optimizer-only portfolios for comparison.
- **Core Outputs:** Portfolio weights, return series, performance analytics, and visualizations.

## Repository Layout

- `run.py` – Main entry point orchestrating data loading, view integration, and evaluation.
- `baselines.py` – Baseline portfolio strategies (equal-weight and optimizer-only).
- `baseline_portfolios/` – CSV exports of baseline portfolio weights and returns.
- `market_data/` – Historical market data snapshots used throughout the study.
- `llm_views/` – JSON files containing processed LLM views for each period and model.
- `evaluation_results/` – CSV summaries of returns and weight allocations for each experiment.
- `figure/` & `Cumulative_return.png` – Visualizations included in the thesis document.
- `portfolio_weight_plot.ipynb` – Notebook for exploratory analysis and figure refinement.

## Getting Started

1. **Clone the Repository**
   ```bash
   git clone https://github.com/Mkhan2317/Master-s_Thesis.git
   cd Master-s_Thesis
   ```

2. **Create and Activate a Virtual Environment (optional but recommended)**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```

3. **Install Dependencies**
   ```bash
   pip install -r requirements.txt
   ```
   > If a requirements file is not yet available, install the packages referenced in the scripts (e.g., `pandas`, `numpy`, `matplotlib`, `scikit-learn`).

4. **Run Core Pipeline**
   ```bash
   python run.py
   ```
   Adjust configuration parameters inside the scripts as needed to reproduce specific experiments.

## Reproducing Experiments

- **LLM View Generation:** The raw prompts and model outputs are stored in `llm_views/`. Use `llm_views/get_common_stocks.py` to refresh universes or regenerate views.
- **Portfolio Evaluations:** Scripts in the repository read the stored views and market data to compute performance metrics. Refer to `evaluate_multiple.py` and `calculate_llm_returns.py` for batch analyses.
- **Baselines:** Run `baseline_portfolios/combine_portfolio.py` to aggregate baseline results across time horizons.

## Figures and Reporting

- Publication-ready figures are in `figure/` with source code in the notebook.
- The thesis manuscript (`Thesis.pdf`) summarizes methodology, experiments, and findings, integrating outputs generated by these scripts.

## Citation

If you reference this work, please cite the thesis:

> MD Amir Khan, “LLM-Assisted Portfolio Construction,” Master’s Thesis, 2025.

## Contact

For questions or collaboration inquiries, please reach out via GitHub Issues or email (see thesis document for contact details).
